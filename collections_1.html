<html dir="ltr"> <head>
<title>Scala 2.8 コレクションAPI - 可変および不変のコレクション</title>

<style type="text/css">.maketitle {
  /* align: center; */
}
div.abstract {
  margin-left: 20%;
  margin-right: 10%;
}
h3.abstract {
  /* align: center; */
}
div.verse, div.quote, div.quotation {
  margin-left: 10%;
  margin-right: 10%;
}
</style>


</head> <body dir="ltr"> <table width="100%" cellpadding="0" cellspacing="2"><tr> <td bgcolor="#99ccff"><a href="http://www.scala-lang.org/docu/files/collections-api/collections_2.html"><img border="0" alt="コレクションAPIの概要" src="http://lampwww.epfl.ch/~odersky/images/next.png"></a></td><td bgcolor="#99ccff"><a href="http://www.scala-lang.org/docu/files/collections-api/collections_0.html"><img border="0" alt="トップ" src="http://lampwww.epfl.ch/~odersky/images/up.png"></a></td><td bgcolor="#99ccff"><img alt="" src="http://lampwww.epfl.ch/~odersky/images/blank.png"></td><td align="center" bgcolor="#99ccff" width="100%"><b>可変および不変のコレクション</b></td><td bgcolor="#99ccff" align="center"><a href="http://www.scala-lang.org/docu/files/collections-api/collections_49.html">目次</a></td></tr></table> <h1>可変および不変のコレクション</h1> <p>Scala のコレクションは，体系的に可変および不変コレクションを区別している．<em>可変</em>コレクションは in-place で更新したり拡張することができる．これは副作用としてコレクションの要素を変更，追加，または削除することができることを意味する．対照的に，<em>不変</em>コレクションは変わることが無い．追加，削除，または更新を模倣した演算は提供されるが，全ての場合において演算は新しいコレクションを返し，古いコレクションは変わることがない．<p>すべてのコレクションクラスは <tt>scala.collection</tt> パッケージもしくは <tt>mutable</tt>, <tt>immutable</tt>, <tt>generic</tt> のどれかのサブパッケージに定義されている．クライアントコードに必要なコレクションのクラスのほどんどには三つの変種があり，ぞれぞれ　<tt>scala.collection, scala.collection.immutable,</tt> か <tt>scala.collection.mutable</tt> のパッケージに存在する．それぞれの変種は可変性に関して異なる特性を持っている．<p><tt>scala.collection.immutable</tt> パッケージのコレクションは，誰にとっても不変であることが保証されている．そのようなコレクションは作成後には一切変更されることがない．したがって，異なる時点で何回同じコレクションの値にアクセスしても常に同じ要素を持つコレクションが得られることに依存できる．<p><tt>scala.collection.mutable</tt> パッケージのコレクションは、in-place でコレクションを変更する演算がある．だから可変コレクションを扱うということは，どのコードが，何時どのコレクションを変更したのかということを理解する必要があることを意味する．<p><tt>scala.collection</tt> パッケージのコレクションは，可変か不変かのどちらでもありうる．例えば，<a href="http://www.scala-lang.org/api/current/scala/collection/IndexedSeq.html">collection.IndexedSeq[T]</a> は，<a href="http://www.scala-lang.org/api/current/scala/collection/immutable/IndexedSeq.html">collection.immutable.IndexedSeq[T]</a> と<a href="http://www.scala-lang.org/api/current/scala/collection/mutable/IndexedSeq.html">collection.mutable.IndexedSeq[T]</a> 両方のスーパークラスです。一般的に，<tt>scala.collection</tt> パッケージの基底コレクションは不変コレクションと同じインターフェイスを定義し，<tt>scala.collection.mutable</tt> パッケージ内の可変コレクションは通常，副作用付きの変更演算を不変インターフェイスに加える．<p>基底コレクションと不変コレクションの違いは，不変なコレクションのクライアントは，他の誰もコレクションを変更しないという保証があるのに対し，基底コレクションのクライアントは自分ではコレクションを変更しなかったという約束しかできない．たとえ静的な型がコレクションを変更するような演算を提供していなくても，実行時の型は他のクライアントが手を加えることができる可変コレクションである可能性がある．<p>デフォルトでは Scala は常に不変コレクションを選ぶ．たとえば，<tt>scala</tt> パッケージのデフォルトのバインディングのせいで，なんの接頭辞や import もなくただ <tt>Set</tt> と書くと不変な set が返ってき，<tt>Iterable</tt> と書くと不変で反復可能なコレクションが返ってくる．可変なデフォルトのバージョンを取得するには，<tt>collection.mutable.Set</tt> または <tt>collection.mutable.Iterable</tt> と明示的に記述する必要がある．<p>可変と不変の両方のバージョンのコレクションを使用する場合に便利な慣例は <tt>collection.mutable</tt> パッケージだけをインポートすることだ．<div class="quote"><p><tt></tt><table cellspacing="1" cellpadding="0"><td><tt></tt><tr><tt> </tt><td colspan="99" align="left"><tt><font color="#0000e5">import</font> scala.collection.mutable</tt></td></tr></td></table><tt> </tt></p></div>これにより，接頭辞なしの <tt>Set</tt> は不変なコレクションを参照するのに対し，<tt>mutable.Set</tt> 可変のものを参照する．<p>コレクション階層内の最後のパッケージが <tt>collection.generic</tt> だ．このパッケージには，コレクションを実装するためのビルディングブロックが含まれている．典型的には，コレクションクラスは、<tt>generic</tt> 内のクラスに演算を委譲することがある．一方，フレームワークのユーザーは <tt>generic</tt> 内のクラスが必要になることは例外的な状況以外はありえない．<p>利便性と後方互換性のために，いつくかの重要な型は <tt>scala</tt> パッケージ内にエイリアス定義してあるため，インポート無しで単純な名前でコレクションを使うことができる．<a href="http://www.scala-lang.org/api/current/scala/collection/immutable/List.html">List</a>型が良い例で，以下の名前でもアクセスすることができる<div class="quote"><p><tt></tt><table cellspacing="1" cellpadding="0"><td><tt></tt><tr><tt> </tt><td colspan="99" align="left"><tt><font color="#660099">scala.collection.immutable.List</font></tt>  <tt><i>定義元</i></tt></td></tr><td><tt> </tt><tr><tt> </tt><td colspan="99" align="left"><tt><font color="#660099">scala.List</font></tt> <tt><i><tt>scala</tt>パッケージのエイリアス経由</i></tt></td></tr><td><tt> </tt><tr><tt> </tt><td colspan="99" align="left"><tt><font color="#660099">List</font> <i><tt>scala._</tt> は常に自動的にインポートされるため</i></tt></td></tr></td></td></td></table><tt> </tt></p></div>エイリアスされているその他の型は次のとおり: <a href="http://www.scala-lang.org/api/current/scala/collection/Traversable.html">Traversable</a>, <a href="http://www.scala-lang.org/api/current/scala/collection/Iterable.html">Iterable</a>, <a href="http://www.scala-lang.org/api/current/scala/collection/Seq.html">Seq</a>, <a href="http://www.scala-lang.org/api/current/scala/collection/IndexedSeq.html">IndexedSeq</a>, <a href="http://www.scala-lang.org/api/current/scala/collection/Iterator.html">Iterator</a>, <a href="http://www.scala-lang.org/api/current/scala/collection/immutable/Stream.html">Stream</a>, <a href="http://www.scala-lang.org/api/current/scala/collection/immutable/Vector.html">Vector</a>, <a href="http://www.scala-lang.org/api/current/scala/collection/mutable/StringBuilder.html">StringBuilder</a>, <a href="http://www.scala-lang.org/api/current/scala/collection/immutable/Range.html">Range</a>．<p>次の図は <tt>scala.collection</tt> パッケージ内の全てのコレクションを示す．これらはすべて、高レベルの抽象クラスや trait で一般に可変と不変の両方の実装を持っている．<p> <p><img alt="&lt;imageは見つかりませんでした&gt;" src="http://www.scala-lang.org/docu/files/collections-api/collections.png"> <p><p>次の図は <tt>scala.collection.immutable</tt> パッケージ内の全てのコレクションを示す．<p> <p><img alt="&lt;imageは見つかりませんでした&gt;" src="http://www.scala-lang.org/docu/files/collections-api/collections.immutable.png"> <p><p>そして，次の図は <tt>scala.collection.mutable</tt> パッケージ内の全てのコレクションを示す．<p> <p><img alt="&lt;imageは見つかりませんでした&gt;" src="http://www.scala-lang.org/docu/files/collections-api/collections.mutable.png"> <p><p>(以上三つ全ての図は decodified.com の Matthias によって生成された．)<p>次へ： <a href="http://www.scala-lang.org/docu/files/collections-api/collections_2.html">コレクション APIの概要</a><hr> <table width="100%" cellpadding="0" cellspacing="2"><tr> <td bgcolor="#99ccff"><a href="http://www.scala-lang.org/docu/files/collections-api/collections_2.html"><img border="0" alt="コレクションAPIの概要" src="http://lampwww.epfl.ch/~odersky/images/next.png"></a></td><td bgcolor="#99ccff"><a href="http://www.scala-lang.org/docu/files/collections-api/collections_0.html"><img border="0" alt="トップ" src="http://lampwww.epfl.ch/~odersky/images/up.png"></a></td><td bgcolor="#99ccff"><img alt="" src="http://lampwww.epfl.ch/~odersky/images/blank.png"></td><td align="center" bgcolor="#99ccff" width="100%"><b>可変および不変のコレクション</b></td><td bgcolor="#99ccff" align="center"><a href="http://www.scala-lang.org/docu/files/collections-api/collections_49.html">目次</a></td></tr></table></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></body></html>